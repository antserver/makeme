<!-- BeginDsi "dsi/head.html" -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Embedthis Bit 0.8.2 Documentation</title>
    <meta name="keywords" content="Bit, Build It!, Javascript"/>
	<meta name="description" content="Embedthis Bit -- Fast, modern replacement for make and autoconf."/>
	<meta name="robots" content="index,follow" />
	<link href="../../../doc.css" rel="stylesheet" type="text/css" />
	<link href="../../../print.css" rel="stylesheet" type="text/css" media="print"/>
    <!--[if IE]>
    <link href="../../../iehacks.css" rel="stylesheet" type="text/css" />
    </![endif]-->
    <link href="http://www.google.com/cse/style/look/default.css" type="text/css" rel="stylesheet" />
</head>

<body>
    <div class="top">
        <a class="logo"  href="http://embedthis.com/">&nbsp;</a>
        <div class="topRight">
            <div class="search">
                <div id="cse-search-form">Loading</div>
                <div class='version'>Embedthis Bit 0.8.0</div>
            </div>
        </div>
        <div class="crumbs">
            <a href="../../../index.html">Home</a>
<!-- EndDsi -->
             &gt;<a href="index.html">Developer Guide</a>&gt; <b>Generating Projects</b>
        </div>
    </div>
    <div class="content">
        <div class="contentRight">
            
                <h1>Quick Nav </h1>
                <ul>
<li><a href="#overview">Overview</a></li>
                </ul>
<!-- BeginDsi "dsi/devSeeAlso.html" -->
            <h1>See Also</h1>
            <ul>
                <li><a href="../../../guide/bit/developers/quick.html">Quick Start with Bit</a></li>
                <li><a href="../../../guide/bit/developers/projects.html">Bit Projects</a></li>
                <li><a href="../../../guide/bit/developers/compiling.html">Compiling Sources</a></li>
                <li><a href="../../../guide/bit/developers/libraries.html">Creating Libraries</a></li>
                <li><a href="../../../guide/bit/developers/executables.html">Building Executables</a></li>
                <li><a href="../../../guide/bit/developers/scripts.html">Running Scripts</a></li>
                <li><a href="../../../guide/bit/developers/copying.html">Copying Files</a></li>
                <li><a href="../../../guide/bit/developers/configuring.html">Configuring a Project</a></li>
                <li><a href="../../../guide/bit/developers/generating.html">Generating Projects</a></li>
                <li><a href="../../../guide/bit/developers/samples.html">Bit Samples</a></li>

                <li><a href="http://ejscript.org/products/ejs/doc/api/ejscript/index.html">Ejscript Language</a></li>
                <li><a href="http://ejscript.org/products/ejs/doc/index.html">Ejscript Documentation</a></li>
            </ul>
<!-- EndDsi -->
        </div>
        <div class="contentLeft">
        <a id="projectGeneration"></a>
        <h1>Generating IDE Projects and Makefiles</h1>
        <p>Bit can generate generate complete project files for building using: make, nmake, Visual Studio, Xcode or
        plain shell scripts. The generated Makefiles or projects are clean, regular and easy to understand or modify.</p>
       
        <p>This document describes how to generate Makefiles and IDE projects using Bit. If you wish to
        learn how to use Bit generated Makefiles, read the <a href="../users/make.html">Using Generated Makefiles</a> guide.</p>
        <h2>Mapping Bit Targets</h2>
        <p>When Bit generates a Makefile or IDE project, it translates the each Bit target onto a project or target in the 
        Makefile or IDE. In Make, Bit targets become Make targets. In Visual Studio, Bit targets become projects. The result
        is a completely native Makefile or IDE project that executes at optimial speed while faithfully representing the
        project.</p>
       
        <h2>Makefiles</h2>
        <p>The Makefiles generated by Bit are flat, meaning that no recursion is used. The entire project
        is expressed as one Makefile. This is desirable because the Makefiles are much simpler to read, understand and
        modify, and they run fast.</p>
        <p>The Makefiles include definitions at the top that can be overridden by specifying Makefile variables on the make
        command line. There are variables for the compiler, linker, compiler flags, output directory and installation prefixes, 
        Here is a sample of the Makefile variables:
        <pre>
CC      := /usr/bin/gcc
LD      := /usr/bin/ld
CONFIG  := $(OS)-$(ARCH)-$(PROFILE)
</pre>
        <p>To override, set the relevant Makefile variable. Note: this must be supplied each time Make is invoked.
        <pre>
make CC=/usr/bin/ccache/gcc
</pre>
        <p>Further definitions are contains in the generated bit.h source code header. All make variables provided on the 
        command line are converted into preprocessor definitions and are passed to the compiler. The bit.h header is
        constructed in such a way to allow overriding by command line preprocessor definitions. For example:</p>
<pre>
make BIT_PACK_SSL=0
</pre>
        <p>This will override the bit.h definition and will disable the use of SSL.</p>
        <h2>Windows Makefiles</h2>
        <p>The Windows Makefiles that Bit generates are similar to Unix Makefiles, except they are designed to work with
        Windows Nmake. The generated code will run natively without requiring a Unix emulator like cygwin. </p>
        <h2>Visual Studio Projects</h2>
        <p>For Visual Studio, Bit creates a Visual Studio sub-projects are created for each Bit executable,
        library, script or file target. This may seem like a lot of projects, but the organization is simple and maps
        bit dependencies well onto Visual Studio project dependencies.</p>
        <p>Bit generates a solution file which includes all the generated projects. Bit creates Visual Studio project
        property files for the product, debug and release builds and for X86 and X64 architectures. This enables changed
        property file settings to be easily inherited by all projects.</p>
        <h2>Xcode Projects</h2>
        <p>For Xcode, Bit creates an Xcode project with targets for each Bit executable,
        library, script or file target. The Bit dependencies are mapped onto Xcode target dependencies.</p>
        <h2>Shell Projects</h2>
        <p>A shell project is just a simple straight line set of commands to build the product.</p>
        
        <h2>Generating</h2>
        <p>Bit uses the <em>--gen</em> command line option to specify the projects to build. 
        <pre>bit --platform macosx-x64-debug -configure . -gen xcode,make</pre>
        <p>This will generate an Xcode project and a Makefile for MAC OSX. Arguments to -gen are: make, nmake, shell, vs,
        xcode, for: Make, Windows Nmake, Shell script, Visual Studio project and Xcode project.</p>
        <p>Bit is capable of cross-generating projects for non-native platforms. For example: you can generate an 
        Xcode project for Mac OS X on a Windows system, or generate Windows Visual Studio Projects on a Mac.</p>
        - why configure
        - why unique platform name
        <h2>Creating Generatable Targets</h2>
        <p>Bit can automatically create equivalent Makefile and IDE project commands for compiling objects, exporting
        headers, building libraries, executables and copy file targets. You do not need to specify any additional
        information, Bit will translate the current Bit targets appropriately for each generated project.
        But for custom actions, Bit needs some guidance. </p>
        
        <h2>Generating from Custom Actions</h2>
        <p>Bit provides a suite of <em>generate</em> properties that are useful to explicitly provide the code to emit into
        the generated Makefile or project file. For example: </p>
        <pre>
stest: {
    build:            "print('Script to run at build time')",
    'generate-sh':    "echo Script to run in shell script projects",
    'generate-make':  "echo Script to run in Makefiles",
    'generate-nmake': "echo Script to run in Windows Nmake files",
    'generate-vs':    "echo Script to run in Visual Studio ",
    'generate-xcode': "echo Script to run in Xcode",
    'generate-linux': "echo Script to run on Linux",
    'generate':       "echo Script to run anywhere else",
}
</pre>
        <p>When generating, Bit examines each target for the presence of <em>generate</em> properties. It tests for these
        properties in the order below (from the most specific to the least specific):
        <ol>
            <li>generate-PROJECT-EXACT-TYPE</li>
            <li>generate-PROJECT-COMPATIBLE-TYPE</li>
            <li>generate-OS</li>
            <li>generate</li>
        </ol> 
        <p>The EXACT-TYPE means that the exact project type will have highest priority. For example: if generating Xcode,
        if a <em>generate-xcode</em> property exists, it will take precedence. The COMPATIBLE-TYPE means that if the exact
        type match is not present, a compatible generation property may be used. The compatible options are:
        for Xcode, a generate-sh will be acceptable. Similarly, if generating a Visual Studio project, a generate-nmake will
        be acceptable.</p>
        <p>If the exact and compatible generate properties are not present, Bit checks if a platform specific property is
        present. For example: <em>generate-linux</em> can be used to provide a script for Linux Makefiles.</p>
        <p>If none of these options are present, Bit checks for a generic <em>generate</em> property.</p>
    </pre>
    <!--
        <h2>Creating Install Targets</h2>
        Deploy manifests
    -->
        <p>To learn more, read some actual <a href="samples.html">Bit Samples</a>.</p>
        </div>
    </div>
<!-- BeginDsi "dsi/bottom.html" -->
	<div class="bottom">
		<p class="footnote"> 
            <a href="../../../product/copyright.html" >&copy; Embedthis Software LLC, 2003-2013. 
            All rights reserved. Embedthis Bit, Ejscript and Appweb are trademarks of Embedthis Software LLC.</a>
		</p>
	</div>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript"> 
      google.load('search', '1', {language : 'en'});
      google.setOnLoadCallback(function() {
        var customSearchControl = new google.search.CustomSearchControl(
          'partner-pub-9935546676162772:ysvxxv4n9rx');

        customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
        var options = new google.search.DrawOptions();
        options.enableSearchboxOnly("http://embedthis.com/search.html");
        customSearchControl.draw('cse-search-form', options);
      }, true);
    </script>
</body>
</html>
