<!-- BeginDsi "dsi/head.html" -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Embedthis MakeMe 0.8.0 Documentation</title>
    <meta name="keywords" content="MakeMe, Bit, GYP, autoconf"/>
	<meta name="description" content="Embedthis MakeMe -- Fast, modern replacement for make and autoconf."/>
	<meta name="robots" content="index,follow" />
	<link href="../../../doc.css" rel="stylesheet" type="text/css" />
	<link href="../../../print.css" rel="stylesheet" type="text/css" media="print"/>
    <!--[if IE]>
    <link href="../../../iehacks.css" rel="stylesheet" type="text/css" />
    </![endif]-->
    <link href="http://www.google.com/cse/style/look/default.css" type="text/css" rel="stylesheet" />
</head>

<body>
    <div class="top">
        <a class="logo"  href="http://embedthis.com/">&nbsp;</a>
        <div class="topRight">
            <div class="search">
                <div id="cse-search-form">Loading</div>
                <div class="version">Embedthis MakeMe 0.8.0</div>
            </div>
        </div>
        <div class="crumbs">
            <a href="../../../index.html">Home</a>
<!-- EndDsi -->
             &gt;<a href="index.html">Developer Guide</a>&gt; <b>Generating Projects</b>
        </div>
    </div>
    <div class="content">
        <div class="contentRight">
            
                <h1>Quick Nav </h1>
                <ul>
                    <li><a href="#generating">Generating</a></li>
                    <li><a href="#targets">MakeMe Targets</a></li>
                    <li><a href="#makefiles">Makefiles</a></li>
                    <li><a href="#windows">Windows Makefiles</a></li>
                    <li><a href="#vs">Visual Studio</a></li>
                    <li><a href="#xcode">Xcode</a></li>
                    <li><a href="#shell">Shell</a></li>
                    <li><a href="#generate">Generating</a></li>
                    <li><a href="#generate-targets">Generate Targets</a></li>
                    <li><a href="#generate-actions">Generate Actions</a></li>
                    <li><a href="#conditional">Conditional Makefiles</a></li>
                </ul>
<!-- BeginDsi "dsi/devSeeAlso.html" -->
            <h1>See Also</h1>
            <ul>
                <li><a href="../../../guide/makeme/developers/index.html">Dev Guide</a></li>
                <li><a href="../../../guide/makeme/developers/projects.html">MakeMe Projects</a></li>
                <li><a href="../../../guide/makeme/developers/compiling.html">Compiling Sources</a></li>
                <li><a href="../../../guide/makeme/developers/libraries.html">Creating Libraries</a></li>
                <li><a href="../../../guide/makeme/developers/executables.html">Building Executables</a></li>
                <li><a href="../../../guide/makeme/developers/scripts.html">Running Scripts</a></li>
                <li><a href="../../../guide/makeme/developers/copying.html">Copying Files</a></li>
                <li><a href="../../../guide/makeme/developers/configurable.html">Configurable Projects</a></li>
                <li><a href="../../../guide/makeme/developers/plugins.html">Creating MakeMe Plugins</a></li>
                <li><a href="../../../guide/makeme/developers/generating.html">Generating Projects</a></li>
                <li><a href="../../../guide/makeme/developers/samples.html">MakeMe Samples</a></li>

                <li><a href="http://ejscript.org/products/ejs/doc/api/ejscript/index.html">Ejscript Language</a></li>
                <li><a href="http://ejscript.org/products/ejs/doc/index.html">Ejscript Documentation</a></li>
            </ul>
<!-- EndDsi -->
        </div>
        <div class="contentLeft">
        <a id="generating"></a>
        <h1>Generating IDE Projects and Makefiles</h1>
        <p>MakeMe can generate generate complete project files for building using: make, nmake, Visual Studio, Xcode or
        plain shell scripts. The generated Makefiles or projects are clean, regular and easy to understand or modify.</p>
       
        <p>This document describes how to generate Makefiles and IDE projects using MakeMe. If you wish to
        learn how to use MakeMe generated Makefiles, read the <a href="../users/make.html">Using Generated Makefiles</a> guide.</p>
        <a name="targets"></a>
        <h2>Targets</h2>
        <p>When MakeMe generates a Makefile or IDE project, it translates the each MakeMe target onto a project or target in the 
        Makefile or IDE. In Make, MakeMe targets become Make targets. In Visual Studio, MakeMe targets become projects. The result
        is a completely native Makefile or IDE project that executes at optimal speed while faithfully representing the
        project.</p>
       
        <a id="makefiles"></a>
        <h2>Makefiles</h2>
        <p>The Makefiles generated by MakeMe are flat, meaning that no recursion is used. The entire project
        is expressed as one Makefile. This is desirable because the Makefiles are much simpler to read, understand and
        modify, and they run fast.</p>
        <p>The Makefiles include definitions at the top that can be overridden by specifying Makefile variables on the make
        command line. There are variables for the compiler, linker, compiler flags, output directory and installation prefixes, 
        Here is a sample of the Makefile variables:
        <pre>
CC      ?= /usr/bin/gcc
LD      ?= /usr/bin/ld
CONFIG  ?= $(OS)-$(ARCH)-$(PROFILE)
</pre>
        <p>To override, set the relevant Makefile variable in the environment. Note: this must be supplied each time Make is invoked.
        <pre>
CC=/usr/bin/ccache/gcc make
</pre>
        <p>On Linux (Unix), these may also be provided on the make command line. But for Windows, they must be provided
        via the environment.</p>
        <p>The definitions are made available to source files during compilation via the generated <em>me.h</em> header file. 
        Make variables provided via the environment are converted into preprocessor definitions and override the default
        values in me.h. The me.h header is
        constructed in such a way to allow overriding by command line preprocessor definitions. For example:</p>
<pre>
ME_EXT_SSL=0 make
</pre>
        <p>This will override the me.h definition and will disable the use of SSL.</p>
        <a id="windows"></a>
        <h2>Windows Makefiles</h2>
        <p>The Windows Makefiles that MakeMe generates are similar to Unix Makefiles, except they are designed to work with
        Windows Nmake. The generated code will run natively without requiring a Unix emulator like cygwin. </p>
        <a id="vs"></a>
        <h2>Visual Studio Projects</h2>
        <p>For Visual Studio, MakeMe creates a Visual Studio sub-projects are created for each MakeMe executable,
        library, script or file target. This may seem like a lot of projects, but the organization is simple and maps
        MakeMe dependencies well onto Visual Studio project dependencies.</p>
        <p>MakeMe generates a solution file which includes all the generated projects. MakeMe creates Visual Studio project
        property files for the product, debug and release builds and for X86 and X64 architectures. This enables changed
        property file settings to be easily inherited by all projects.</p>
        <a id="xcode"></a>
        <h2>Xcode Projects</h2>
        <p>For Xcode, MakeMe creates an Xcode project with targets for each MakeMe executable,
        library, script or file target. The MakeMe dependencies are mapped onto Xcode target dependencies.</p>
        <a id="shell"></a>
        <h2>Shell Projects</h2>
        <p>A shell project is just a simple straight line set of commands to build the product.</p>
        
        <a id="generate"></a>
        <h2>Generating</h2>
        <p>MakeMe uses the <em>--gen</em> command line option to specify the projects to build. 
        <pre>me --platform macosx-x64-debug -configure . -gen xcode,make</pre>
        <p>This will generate an Xcode project and a Makefile for MAC OSX. Arguments to -gen are: make, nmake, shell, vs,
        xcode, for: Make, Windows Nmake, Shell script, Visual Studio project and Xcode project.</p>
        <p>MakeMe is capable of cross-generating projects for non-native platforms. For example: you can generate an 
        Xcode project for Mac OS X on a Windows system, or generate Windows Visual Studio Projects on a Mac.</p>
        <p>When generating for a non-local platform, you must select the <em>-configure .</em> option. If generating
        for the local platform, you do not need to reconfigure.</p>
        <p>You should choose a unique profile name ("debug" in the example above).  The platform output products directory
        will contain this name and if you are building via MakeMe, Makefile and/or IDE, it is important to keep the various
        output products directories separate. This is because some IDEs will add incompatible compiler options that will not
        interoperate with builds by Make or MakeMe.</p>
        <a id="generate-targets"></a>
        <h2>Generating Targets</h2>
        <p>MakeMe can automatically create equivalent Makefile and IDE project commands for compiling objects, exporting
        headers, building libraries, executables and copy file targets. You do not need to specify any additional
        information, MakeMe will translate the current MakeMe targets appropriately for each generated project.
        But for custom actions, MakeMe needs some guidance. </p>
        
        <a id="generate-actions"></a>
        <h2>Generating from Custom Actions</h2>
        <p>MakeMe provides a suite of <em>generate</em> properties that are useful to explicitly provide the code to emit into
        the generated Makefile or project file. For example: </p>
        <pre>
stest: {
    build:            "print('Script to run at build time')",
    'generate-sh':    "echo Script to run in shell script projects",
    'generate-make':  "echo Script to run in Makefiles",
    'generate-nmake': "echo Script to run in Windows Nmake files",
    'generate-vs':    "echo Script to run in Visual Studio ",
    'generate-xcode': "echo Script to run in Xcode",
    'generate-linux': "echo Script to run on Linux",
    'generate':       "echo Script to run anywhere else",
}
</pre>
        <p>When generating, MakeMe examines each target for the presence of <em>generate</em> properties. It tests for these
        properties in the order below (from the most specific to the least specific):
        <ol>
            <li>generate-PROJECT-EXACT-TYPE</li>
            <li>generate-PROJECT-COMPATIBLE-TYPE</li>
            <li>generate-OS</li>
            <li>generate</li>
        </ol> 
        <p>The EXACT-TYPE means that the exact project type will have highest priority. For example: if generating Xcode,
        if a <em>generate-xcode</em> property exists, it will take precedence. The COMPATIBLE-TYPE means that if the exact
        type match is not present, a compatible generation property may be used. The compatible options are:
        for Xcode, a generate-sh will be acceptable. Similarly, if generating a Visual Studio project, a generate-nmake will
        be acceptable.</p>
        <p>If the exact and compatible generate properties are not present, MakeMe checks if a platform specific property is
        present. For example: <em>generate-linux</em> can be used to provide a script for Linux Makefiles.</p>
        <p>If none of these options are present, MakeMe checks for a generic <em>generate</em> property.</p>
        <a id="conditional"></a>
        <h2>Generating Conditional Makefiles</h2>
        <p>MakeMe can generate conditional Makefiles where the list of targets to build may be modified at run-time depending
        on Make environment variables. These variables override default values defined in the platform makefile and/or the
        product <em>me.h</em> configuration header.  For example:
        <pre>$ <b>ME_EXT_EST=0</b> make</pre>
        <p>This will disable use of the EST (Embedded Security Transport SSL).</p>
        <p>The <em>extensions</em> target property is used to specify what extensions are required by a target before it 
        will be built. 
<pre>
rocket: {
    type: 'exe'
    sources: '*.c',
    extensions: [ 'ssl' ],
},
</pre>
        <p>Only if the SSL extension is enabled, will the generated Makefile build the rocket target.</p>
        <h2>Learn More</h2>
        <p>To learn more, read some actual <a href="samples.html">MakeMe Samples</a>.</p>
        </div>
    </div>
<!-- BeginDsi "dsi/bottom.html" -->
	<div class="bottom">
		<p class="footnote"> 
            <a href="../../../product/copyright.html" >&copy; Embedthis Software LLC, 2003-2014. 
            All rights reserved. Embedthis MakeMe, Ejscript and Appweb are trademarks of Embedthis Software LLC.</a>
		</p>
	</div>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript"> 
      google.load('search', '1', {language : 'en'});
      google.setOnLoadCallback(function() {
        var customSearchControl = new google.search.CustomSearchControl(
          'partner-pub-9935546676162772:ysvxxv4n9rx');

        customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
        var options = new google.search.DrawOptions();
        options.enableSearchboxOnly("http://embedthis.com/search.html");
        customSearchControl.draw('cse-search-form', options);
      }, true);
    </script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-179169-5']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</body>
</html>
