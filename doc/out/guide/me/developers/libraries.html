<!DOCTYPE html>
<html lang="en">
<head>
    <title>Creating Libraries</title>
    <!-- Copyright Embedthis Software, LLC, 2003-2014. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="MakeMe, Bit, GYP, autoconf, make, cake" />
    <meta name="description" content="Embedthis MakeMe -- Fast, modern replacement for make and autoconf." />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href="../../../lib/semantic/packaged/css/semantic.css" rel="stylesheet" type="text/css" />
    <link href="../../../css/all.css" rel="stylesheet" type="text/css" />
    <link href="../../../images/favicon.ico" rel="shortcut icon" />

</head>
<body>
        
    <div class="ui large left vertical inverted labeled overlay sidebar menu">
        <div class="item">
            <a href="../../../">
                <b>General</b>
            </a>
            <div class="menu">
                <a class="item" href="../../../index.html">MakeMe Overview</a>
                <a class="item" href="../../../guide/me/features.html">MakeMe Features</a>
                <a class="item" href="https://embedthis.com/download/me.html">Download</a> 
                <a class="item" href="../../../licensing/index.html">Licensing</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../install/index.html">
                <b>Installation</b>
            </a>
            <div class="menu">
                <a class="item" href="../../../install/linux.html">Installing for Linux</a>
                <a class="item" href="../../../install/mac.html">Installing for Mac OS X</a>
                <a class="item" href="../../../install/windows.html">Installing for Windows</a>
                <a class="item" href="../../..//install/releaseNotes.html">Release Notes</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/me/users/index.html"><b>User's Guide</b></a>
            <div class="menu">

                <a class="item" href="../../../guide/me/users/using.html">Using MakeMe</a>
                <a class="item" href="../../../guide/me/users/configuring.html">Running Configure</a>
                <a class="item" href="../../../guide/me/users/debugging.html">Debugging a Build</a>
                <a class="item" href="../../../guide/me/users/make.html">Using Generated Makefiles</a>
                <a class="item" href="../../../guide/me/users/cross.html">Cross-Compiling</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/me/developers/index.html">Developer's Guide</a>
            <div class="menu">
                <a class="item" href="../../../guide/me/developers/compiling.html">Compiling Sources</a>
                <a class="item" href="../../../guide/me/developers/libraries.html">Creating Libraries</a>
                <a class="item" href="../../../guide/me/developers/executables.html">Creating Executables</a>
                <a class="item" href="../../../guide/me/developers/scripts.html">Build Scripts</a>
                <a class="item" href="../../../guide/me/developers/copying.html">Copying Files and Directories</a>
                <a class="item" href="../../../guide/me/developers/configurable.html">Configurable Projects</a>
                <a class="item" href="../../../guide/me/developers/plugins.html">MakeMe Plugins</a>
                <a class="item" href="../../../guide/me/developers/generating.html">Generating</a>
                <a class="item" href="../../../guide/me/developers/samples.html">Samples</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../ref/me/index.html">Reference Guide</a>
            <div class="menu">
                <a class="item" href="../../../ref/me/syntax.html">File Syntax</a>
                <a class="item" href="../../../ref/me/dom.html">MakeMe DOM</a>
                <a class="item" href="../../../ref/me/api/index.html">MakeMe API</a>
                <a class="item" href="../../../ref/me/processing.html">File Processing</a>
                <a class="item" href="../../../ref/me/commandline.html">Command Line</a>
                <a class="item" href="../../../ref/me/events.html">Events</a>
                <a class="item" href="../../../ref/me/targets.html">Targets</a>
                <a class="item" href="../../..//man/me.html">Manual Page</a>
                <a class="item" href="http://embedthis.com/ejs/doc/api/ejscript/index.html">
                    Language Reference</a>
                <a class="item" href="http://embedthis.com/ejs/doc/index.html">Ejscript Documentation</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/me/developers/project.html">Project Resources</a>
            <div class="menu">
                <a class="item" href="http://goo.gl/umR6dt">Official MakeMe News</a>
                <a class="item" href="https://embedthis.com/me/">MakeMe Web Site</a>
                <a class="item" href="https://github.com/embedthis/me">Source Code Repository</a>
                <a class="item" href="https://github.com/embedthis/me/issues">Project Issue Database</a>
                <a class="item" href="https://github.com/embedthis/me/releases">Change Log</a>
                <a class="item" href="https://github.com/embedthis/me/milestones">Roadmap</a>
                <a class="item" href="https://embedthis.com/scripts/contributors.esp">Contributors Agreement</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../source/index.html">Built with MakeMe</a>
            <div class="menu">
                <a class="item" href="../../../source/overview.html">Building Overview</a>
                <a class="item" href="../../../source/make.html">Building with Make</a>
                <a class="item" href="../../../source/me.html">Building with MakeMe</a>
                <a class="item" href="../../../source/ide.html">Building with an IDE</a>
            </div>
        </div>
        <div class="item">
            <b>Links</b>
            <div class="menu">
                <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                <a class="item" href="http://twitter.com/mobstream">Twitter</a>
            </div>
        </div>
    </div>

    <div class="ui inverted masthead">
                <div class="column">
            <div class="inverted secondary pointing ui menu">
                <div class="header left item">
                    <!-- <a href="/index.html"><img src="/images/embedthis.png"></a> -->
                    <a href="/index.html">MakeMe Documentation</a>
                </div>
                <div class="right menu">
                    <div class="ui top right">
                        <a class="item" href="https://embedthis.com/me/">MakeMe</a>
                        <a class="item" href="https://github.com/embedthis/me">Repository</a>
                        <a class="item" href="http://groups.google.com/group/makeme">Support</a>
                    </div>
                </div>
            </div>
            <div class="ui breadcrumb">
                <a class="section" href="../../../">Home</a>
                
                <div class="divider">/</div>
                <a class="section " href="index.html">
                    Developer Guide
                </a>
                
                <div class="divider">/</div>
                <a class="section active" href="libraries.html">
                    Creating Libraries
                </a>
                
            </div>
        </div>
        <div class="ui black small launch right attached toggle button" style="width: 40px;">
            <i class="icon list layout">
                <span class="text" style="display: none;">Menu</span>
            </i>
        </div>

    </div>
    <div class="content">
<h2>Creating Libraries</h2>
        <p>MakeMe creates libraries by specifying the sources to compile in a library target. For example:
<pre class="ui code segment">
targets {
    libdemo: {
        type: 'lib',
        sources: '*.c',
    },
}
</pre>
        
        <p>The <em>sources</em> property is set to the list of files to compile. See <a href="compiling.html">Compiling
            Sources</a> for how to use the sources property.</p>
        <p>Building this target will then compile the specified source files and build
        the named library with the relevant compiled objects.</p>
<pre class="ui code segment">
me libdemo
</pre>
        <p>When building, MakeMe transparently creates targets for each of the compiled source files and for 
        any include files referenced by the sources. If the source file or its include files are updated, the 
        relevant source file or files will be recompiled and library rebuilt.</p>
        <a name="dependencies"></a>
        <h2>Dependencies</h2>
        <p>On some platforms, linking a library will require that all unresolved references in other libraries be
        resolved before the link can successfully complete. Such library dependencies are specified via the
        <em>depends</em> property. The depends property takes a list of other targets that must be built before
        the current target can complete. Furthermore, the compiler, defines includes, libraries, libpaths and linker 
        properties from the other target are imported into the current target. For example, given::</p>
<pre class="ui code segment">
libsqlite3: {
    type: 'lib',
    defines: [ 'FTS4' ],
    includes : [ /usr/include/sqlite ],
    sources: [ '*.c' ],
},
</pre>
        <p>Then the following library target will depend on libsqlite3. It will automatically link with libsqlite3,
        and when the source for libappweb is compiled, it will use the exported defines and includes from libsqlite3.</p>
<pre class="ui code segment">
libappweb: {
    type: 'lib',
    sources: [ '*.c' ],
    headers: [ '*.h' ],
    depends: [ 'libsqlite3' ],
},
</pre>
        <p>Note: the names in the depends property these are the target names (target.name property) and not
        the library name. To specify external libraries that are not built with MakeMe, use the <em>libraries</em> 
        property collection.</p>
        <h2>Extensions</h2>
        <p>Products are sometimes configured with extensions that provide libraries to augment the product. For
        example: the PHP extension adds the libphp5 library. To conditionally build a target only if an specific
        extension is available, use the <em>extensions</em> property. For example:</p>
<pre class="ui code segment">
librocket: {
    type: 'lib',
    sources: [ '*.c' ],
    headers: [ '*.h' ],
    <b>extensions: [ 'fuel' ]</b>,
</pre>
        <p>The <em>extensions</em> property indicates that this target should only be built if the <em>fuel</em> extension is
        enabled. Note this will not import any defined libraries, library paths, include paths or compiler definitions to
        this target. To do that, you need to use the <em>depends</em> property</p>
        <a name="static"></a>
        <h2>Static Libraries</h2>
        <p>By default, MakeMe will build a shared library for a library target. To build a static library, set the 
                <i>static</i> property to true.</p>
<pre class="ui code segment">
libname: {
    type: 'lib',
    sources: '*.c',
    static: true,
},
</pre>
        <p>A complete static build is also possible via the <em>--static</em> configure option. This will cause
        all targets of type '<em>lib</em>' to be static libraries instead of shared libraries.</p>
<pre class="ui code segment">configure --static</pre>
        <p>To learn more, read about <a href="executables.html">Creating Executables</a>.</p>
    </div>
    <div class="ui basic center aligned segment" id="terms">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.
            Generated on Aug 20, 2014.
        </p>
    </div>

    <script src="../../../lib/jquery/jquery.js"></script>
    <script src="../../../lib/semantic/packaged/javascript/semantic.js"></script>
    <script>
        $('.sidebar').sidebar({overlay: false}).sidebar('toggle');
        $('.sidebar').first().sidebar('attach events', '.toggle.button');
    </script>
</body>
</html>
