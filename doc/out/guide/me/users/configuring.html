<!DOCTYPE html>
<html lang="en">
<head>
    <title>Configuring</title>
    <!-- Copyright Embedthis Software, LLC, 2003-2014. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="MakeMe, Bit, GYP, autoconf, make, cake" />
    <meta name="description" content="Embedthis MakeMe -- Fast, modern replacement for make and autoconf." />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href="../../../lib/semantic/packaged/css/semantic.css" rel="stylesheet" type="text/css" />
    <link href="../../../css/all.css" rel="stylesheet" type="text/css" />
    <link href="../../../images/favicon.ico" rel="shortcut icon" />

</head>
<body>
        
    <div class="ui large left vertical inverted labeled overlay sidebar menu">
        <div class="item">
            <a href="../../../">
                <b>General</b>
            </a>
            <div class="menu">
                <a class="item" href="../../../index.html">MakeMe Overview</a>
                <a class="item" href="../../../guide/me/features.html">MakeMe Features</a>
                <a class="item" href="https://embedthis.com/download/me.html">Download</a> 
                <a class="item" href="../../../licensing/index.html">Licensing</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../install/index.html">
                <b>Installation</b>
            </a>
            <div class="menu">
                <a class="item" href="../../../install/linux.html">Installing for Linux</a>
                <a class="item" href="../../../install/mac.html">Installing for Mac OS X</a>
                <a class="item" href="../../../install/windows.html">Installing for Windows</a>
                <a class="item" href="../../..//install/releaseNotes.html">Release Notes</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/me/users/index.html"><b>User's Guide</b></a>
            <div class="menu">

                <a class="item" href="../../../guide/me/users/using.html">Using MakeMe</a>
                <a class="item" href="../../../guide/me/users/configuring.html">Running Configure</a>
                <a class="item" href="../../../guide/me/users/debugging.html">Debugging a Build</a>
                <a class="item" href="../../../guide/me/users/make.html">Using Generated Makefiles</a>
                <a class="item" href="../../../guide/me/users/cross.html">Cross-Compiling</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/me/developers/index.html">Developer's Guide</a>
            <div class="menu">
                <a class="item" href="../../../guide/me/developers/compiling.html">Compiling Sources</a>
                <a class="item" href="../../../guide/me/developers/libraries.html">Creating Libraries</a>
                <a class="item" href="../../../guide/me/developers/executables.html">Creating Executables</a>
                <a class="item" href="../../../guide/me/developers/scripts.html">Build Scripts</a>
                <a class="item" href="../../../guide/me/developers/copying.html">Copying Files and Directories</a>
                <a class="item" href="../../../guide/me/developers/configurable.html">Configurable Projects</a>
                <a class="item" href="../../../guide/me/developers/plugins.html">MakeMe Plugins</a>
                <a class="item" href="../../../guide/me/developers/generating.html">Generating</a>
                <a class="item" href="../../../guide/me/developers/samples.html">Samples</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../ref/me/index.html">Reference Guide</a>
            <div class="menu">
                <a class="item" href="../../../ref/me/syntax.html">File Syntax</a>
                <a class="item" href="../../../ref/me/dom.html">MakeMe DOM</a>
                <a class="item" href="../../../ref/me/api/index.html">MakeMe API</a>
                <a class="item" href="../../../ref/me/processing.html">File Processing</a>
                <a class="item" href="../../../ref/me/commandline.html">Command Line</a>
                <a class="item" href="../../../ref/me/events.html">Events</a>
                <a class="item" href="../../../ref/me/targets.html">Targets</a>
                <a class="item" href="../../..//man/me.html">Manual Page</a>
                <a class="item" href="http://embedthis.com/ejs/doc/api/ejscript/index.html">
                    Language Reference</a>
                <a class="item" href="http://embedthis.com/ejs/doc/index.html">Ejscript Documentation</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../guide/me/developers/project.html">Project Resources</a>
            <div class="menu">
                <a class="item" href="http://goo.gl/umR6dt">Official MakeMe News</a>
                <a class="item" href="https://embedthis.com/me/">MakeMe Web Site</a>
                <a class="item" href="https://github.com/embedthis/me">Source Code Repository</a>
                <a class="item" href="https://github.com/embedthis/me/issues">Project Issue Database</a>
                <a class="item" href="https://github.com/embedthis/me/releases">Change Log</a>
                <a class="item" href="https://github.com/embedthis/me/milestones">Roadmap</a>
                <a class="item" href="https://embedthis.com/scripts/contributors.esp">Contributors Agreement</a>
            </div>
        </div>
        <div class="item">
            <a href="../../../source/index.html">Built with MakeMe</a>
            <div class="menu">
                <a class="item" href="../../../source/overview.html">Building Overview</a>
                <a class="item" href="../../../source/make.html">Building with Make</a>
                <a class="item" href="../../../source/me.html">Building with MakeMe</a>
                <a class="item" href="../../../source/ide.html">Building with an IDE</a>
            </div>
        </div>
        <div class="item">
            <b>Links</b>
            <div class="menu">
                <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                <a class="item" href="http://twitter.com/mobstream">Twitter</a>
            </div>
        </div>
    </div>

    <div class="ui inverted masthead">
                <div class="column">
            <div class="inverted secondary pointing ui menu">
                <div class="header left item">
                    <!-- <a href="/index.html"><img src="/images/embedthis.png"></a> -->
                    <a href="/index.html">MakeMe Documentation</a>
                </div>
                <div class="right menu">
                    <div class="ui top right">
                        <a class="item" href="https://embedthis.com/me/">MakeMe</a>
                        <a class="item" href="https://github.com/embedthis/me">Repository</a>
                        <a class="item" href="http://groups.google.com/group/makeme">Support</a>
                    </div>
                </div>
            </div>
            <div class="ui breadcrumb">
                <a class="section" href="../../../">Home</a>
                
                <div class="divider">/</div>
                <a class="section " href="index.html">
                    User's Guide
                </a>
                
                <div class="divider">/</div>
                <a class="section active" href="configuring.html">
                    Configuring
                </a>
                
            </div>
        </div>
        <div class="ui black small launch right attached toggle button" style="width: 40px;">
            <i class="icon list layout">
                <span class="text" style="display: none;">Menu</span>
            </i>
        </div>

    </div>
    <div class="content">
<h2>Running Configure</h2>
        <p>If your project has been designed for configuring, it will have a <em>main.me</em> file
        that describes the project, what it requires to build, and which extensions it can utilize.</p>
        <p>For configurable products, developers typically provide a configure script to mimic the familiar autoconf 
        configure pattern. This script minimally invokes MakeMe using the configure target:
        <pre class="ui code segment">
# configure script
me configure "$@"</pre>
        <p>MakeMe can also be invoked directly to configure your project:</p>
        <ul>
            <li>me configure</li>
            <li>me -configure .</li>
        </ul>
        <p>Note that MakeMe switches can be prefixed with either a double "<em>--</em>" or a single "<em>-</em>" dashes.</p>
        <h2>Configuration Outputs</h2>
        <p>When configuring, MakeMe will determine the capabilities of your system and create a several files and 
        directories. These include:</p>
        <ul>
            <li>A startup MakeMe file: <em>start.me</em></li>
            <li>A platform output directory for objects, libraries and executables: <em>build/OS-ARCH-PROFILE</em></li>
            <li>A platform specific MakeMe file: <em>build/OS-ARCH-PROFILE/platform.me</em></li>
            <li>A source definitions header: <em>me.h</em></li>
        </ul>
        <p>MakeMe will use these files and output directory when performing subsequent builds and compiling sources.</p>
        <p>The <em>start.me</em> file is the primary MakeMe file that is invoked when MakeMe is run. For configured
        projects, this simply loads the platform.me file.</p>
        <a name="customizing"></a>
        <h2>Customizing the Build</h2>
        <p>Before customizing, it can be helpful to see the current configuration. The following command will display
        the complete, current configuration:</p>
        <pre class="ui code segment">me configuration</pre>
        <p>When running "me configure", you can modify the configuration by adding or removing extensions and enabling or
           disabling various features.</p> 
        <h3>Extensions</h3>
        <p>If a discoverable extension is installed in a non-standard location, you may need to inform MakeMe of its 
       whereabouts. Do this via: <pre class="ui code segment">configure --with NAME=/path/to/extension</pre>
        <p>Some extensions that are neither required nor discoverable, may still supported by your project.
           These extensions but must be explicitly requested via the <em>-with</em> switch for them to be configured. 
           For example, Appweb supports Ejscript but it is not enabled by default. To build with Ejscript, you request it like this:</p>
        <pre class="ui code segment">configure -with ejs</pre>
        <p>You can explicitly disable an extension  that has been discovered on your system, via the <em>-without</em> switch
        <pre class="ui code segment">configure -without ssl</pre>
        <p>To see a list of supported extensions, run <em>configure --help</em>.</p>
        <pre class="ui code segment">$ <b>configure --help</b>
Usage: me [options] [targets|actions] ...
...
Extension Packages (--with NAME, --without NAME):
    est                 # Embedded Security Transport (SSL)
    openssl             # OpenSSL (SSL)
    sqlite              # SQLite Database
    zip                 # Zip Compression Tool
</pre>
        <h3>Features</h3>
        <p>Most projects have configurable options that can be tailored via the configure <em>--set</em> switch. This takes
the form <em>--set KEY=VALUE</em>. For example:
        <pre class="ui code segment">configure --set mpr.tracing=false</pre>
        <p>To enable a feature, set it to true or 1. To disable, set to false or 0. The <em>configure --help</em> command
        will list the features that can be selected.</p>
        
        <h3>Installation Prefixes</h3>
        <p>MakeMe projects typically define a <em>prefixes</em> collection that define where the various pieces of the
        application will be installed. To override where the project will be installed, use the <em>--prefix</em> configure
        option. For example:</p>
        <pre class="ui code segment">configure --prefix base=/opt</pre>
        <p>This will cause the project to be installed under <em>/opt</em> instead of the usual location (/usr/local).</p>
        
        <p>To display the current installation prefixes, type:</p>
        <pre class="ui code segment">$ <b>me --get prefixes</b>
{
    root: "/",
    base: "/usr/local",
    data: "/",
    state: "/var",
    app: "/usr/local/lib/makeme",
    vapp: "/usr/local/lib/me/0.5.4",
    bin: "/usr/local/bin",
    inc: "/usr/local/include",
    lib: "/usr/local/lib",
    man: "/usr/local/share/man",
    sbin: "/usr/local/sbin",
    etc: "/etc/makeme",
    web: "/var/www/makeme-default",
    log: "/var/log/makeme",
    spool: "/var/spool/makeme",
    cache: "/var/spool/me/cache",
}
</pre>
        <p>Depending on the project and target system, the installation prefixes may vary.</p>
        <p>For those familiar with autoconf, the major autoconf prefix switches are supported by MakeMe.</p>
        <a name="outside"></a>
        <h2>Outside Source Tree Builds</h2>
        <p>MakeMe supports building from read-only source trees. To do this, use <em>me -config path</em> when
        configuring. Run this from a writable directory and reference the read-only source tree via the
        <em>-config</em> switch. MakeMe will create the start.me, platform output directory and the platform.me file.
        Thereafter run <em>me</em> from the writable directory for all operations.</p>
        <a name="cross"></a>
        <h2>Configuring for Cross-Compiling</h2>
        <p>To build a product for platform different to that of the local system is called cross compiling.
        Sometimes this cross compiling is just for a different instruction set (say x64 instead of x86). Other times
        it is for a completely different operating system and/or CPU architecture. In such cases a cross-compiler
        may be required to build for the target platform.</p>
        <p>MakeMe supports cross compiling via the <em>me --platform OS-ARCH-PROFILE configure</em> switch. This adds a
        platform to the list of platforms to be made when building. Multiple platforms may be specified and the
        <em>local</em> platform alias may be used for the local development platform.</p>
        <p>The ARCH componenty may contain a specific CPU to tune for. This is specified as a <em>:CPU</em> suffix 
        to the ARCH field. Some operating systems such as VxWorks, require a CPU specifier. For example:</p>
        <pre class="ui code segment">me --platform vxworks-arm:arm7tdmi-debug -configure .</pre>
        <p>Some products require local building to make tools that are required to build for any platform. These
        products add a "platforms: ['local']" property to their settings collection in the main.me file. This
        automatically adds the local platform to the platforms list and is the same as adding <em>--platform local</em> on
        the command line when configuring.</p>
            <pre class="ui code segment">me --platform windows-x64-debug -configure .</pre>
        <p>This will create a windows-x64-debug.me configuration file and a start.me that references it. The platform
        switch does not need to be restated after configuration and will be ignored.</p>
        <h3>Environment Variables</h3>
        <p>MakeMe has default command paths and command flags for the compiler, linker and other tools. These can be
        overridden by providing environment variables containing alternate flags to use. </p>
        <p>Use the variables AR, CC and LD to specify the path to the archiver, compiler and linker tools.
        Use CFLAGS to provide compiler flags, DFLAGS for
        pre-processor definitions, IFLAGS for compiler include paths and LDFLAGS for linker flags.</p>
        <p>If these flags are
        provided to MakeMe when building, they apply to that run only. If the flags are provide when configuring, they are
        saved in the generated platform build file and apply to all subsequent runs.
        For example:
            <pre class="ui code segment">CC=/path/to/compiler CFLAGS=-w me configure</pre>
        <a name="useful"></a>
        <h2>Useful Configure Commands</h2>
        <p>Show commands as they are executed:</p>
        <pre class="ui code segment">me --show</pre>
        <p>To dump the entire configuration into a single MakeMe file. This is great for debugging.</p>
        <pre class="ui code segment">configure --dump</pre>
        <p>To learn more, read about <a href="debugging.html">Debugging a Build</a>.</p>
        <a name="customize-me"></a> 
        <h2>Customize.me</h2>
        <p>Instead of manually specifying settings to configure, you can create a <em>customize.me</em> file that 
        will be loaded after the <em>main.me</em> and all referenced MakeMe files are fully loaded. 
        The customize.me file can thus override any prior
        MakeMe setting. Projects should not ship this file and so
        users need not fear their customize.me file will be overwritten.</p>
        <pre class="ui code segment">
settings: {
    customize: [
        'custom.me',
    ],
}</pre>
    </div>
    <div class="ui basic center aligned segment" id="terms">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.
            Generated on Aug 20, 2014.
        </p>
    </div>

    <script src="../../../lib/jquery/jquery.js"></script>
    <script src="../../../lib/semantic/packaged/javascript/semantic.js"></script>
    <script>
        $('.sidebar').sidebar({overlay: false}).sidebar('toggle');
        $('.sidebar').first().sidebar('attach events', '.toggle.button');
    </script>
</body>
</html>
